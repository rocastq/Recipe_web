<!DOCTYPE html>
<html>
<head>
  <title><%= recipe.title %></title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"/>
</head>
<body>
<div class="container mt-4">
  <h1><%= recipe.title %></h1>
  <% if (recipe.image) { %>
    <img src="<%= recipe.image %>" style="max-width: 350px;">
  <% } %>
  <p><strong>Description:</strong> <%= recipe.description %></p>
  <% if (recipe.public) { %>
    <p><strong>By:</strong> <%= recipe.username %></p>
  <% } %>
  
  <h4>Ingredients</h4>
  <ul>
    <% if (recipe.ingredients && recipe.ingredients.length > 0) { %>
      <% recipe.ingredients.forEach(function(ing) { %>
        <li>
          <%= ing.quantity %> <%= ing.name %>
        </li>
      <% }) %>
    <% } else { %>
      <li><em>No ingredients found.</em></li>
    <% } %>
  </ul>

  <h4>Instructions</h4>
  <p><%= recipe.instructions %></p>

  <a href="/recipes" class="btn btn-secondary mt-3">Back</a>
  
  <% // Show Edit button only if this recipe belongs to the logged-in user %>
  <% if (recipe.username === user) { %>
    <a href="/recipes/<%= recipe._id %>/edit" class="btn btn-warning mt-3 ms-2">Edit This Recipe</a>
  <% } %>
</div>
</body>
</html>
